#!/usr/bin/env bash

# set -e

CONF="${CONF:-${HOME}/conf}"

source profile/.env
source profile/.profile

echo "Making necessary dirs."
mkdir -p "${USER_BIN_HOME}"
mkdir -p "${USER_CONFIG_HOME}"
mkdir -p "${USER_CACHE_HOME}"
mkdir -p "${USER_LIB_HOME}"
mkdir -p "${USER_SHARE_HOME}"
mkdir -p "${USER_SRC_HOME}"
mkdir -p "${USER_TMP_HOME}"
mkdir -p "${USER_VAR_HOME}"

# Link config files.
dirs_to_link=(
    alacritty
    bash
    emacs
    fish
    git
    ipython
    nix
    nvim
    profile
    screen
    spacemacs
    stack
    tmux
    vim
    zsh
)
bin/link ${dirs_to_link[@]}


# Run specific init / install scripts.
for bin in nix zsh pyenv neovim golang rust stack; do
  echo "Running ${bin}"
  "bin/init/${bin}"
done

echo "Finished installing.  Please restart the shell."


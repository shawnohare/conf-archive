#!/usr/bin/env bash
# small wrapper around the conf install command

set -e

readonly CONF=${CONF:-"${HOME}/conf"}
readonly CONF_BRANCH=${CONF_BRANCH:-"master"}
readonly repo="https://github.com/shawnohare/conf.git"

if [ ! -d "${CONF}" ]; then
  echo "Cloning ${repo}"
  git clone -b "${CONF_BRANCH} "--recursive "${repo}" "${CONF}"
fi


if [ -d "${CONF}" ]; then
  cd "${CONF}"
  git checkout "${CONF_BRANCH}"
  "${CONF}/bin/bin/conf" -v install
else
  echo "Error: Could not clone conf ${repo} into ${CONF}."
  exit 1
fi

exit 0
